# DIAS Sub-System: The Task Master

## 1. Overview

The Task Master is the intelligent project management component within the DIAS. It transforms high-level roadmaps into comprehensive, actionable development plans with sophisticated analysis capabilities. It serves as the bridge between strategic planning and tactical execution.

## 2. Core Capabilities

The Task Master provides a suite of analysis tools to create a detailed and predictable project plan.

*   **Task Complexity Analysis**:
    *   **Scoring**: Rates technical complexity on a 1-5 scale.
    *   **Estimation**: Provides hour-based time estimates with confidence intervals.
    *   **Risk Assessment**: Categorizes tasks as Low/Medium/High risk with mitigation strategies.

*   **Dependency Management**:
    *   **Mapping**: Analyzes and maps all task interdependencies.
    *   **Critical Path**: Identifies the minimum time sequence for project completion.
    *   **Parallelization**: Detects tasks that can be executed concurrently.

*   **Resource & Wave Planning**:
    *   **Resource Allocation**: Recommends team structures and designs parallel work streams.
    *   **Wave Orchestration**: Groups tasks into logical waves with validation gates between them, allowing for progressive and adaptive development strategies.

## 3. Integration Architecture

The Task Master is deeply integrated into the Vibe Lab ecosystem, from the API and database to the UI and AI agent coordination.

<details>
<summary>View API, Database, and UI Integration Details</summary>

### API Integration Points

*   **Trigger Endpoint**: `POST /api/v1/projects/{projectId}/tasks/analyze`
*   **Response Endpoints**:
    *   `GET /api/v1/projects/{projectId}/tasks`
    *   `GET /api/v1/projects/{projectId}/tasks/critical-path`
    *   `GET /api/v1/projects/{projectId}/tasks/dependencies`

### Database Schema Integration

The `tasks` table is enhanced with JSONB fields to store the rich analytical data generated by the Task Master, including the task matrix, critical path, and risk assessment.

```sql
CREATE TABLE tasks (
    id UUID PRIMARY KEY,
    project_id UUID REFERENCES projects(id),
    roadmap_id UUID REFERENCES roadmaps(id),
    task_matrix JSONB NOT NULL,
    critical_path JSONB NOT NULL,
    risk_assessment JSONB NOT NULL,
    resource_allocation JSONB NOT NULL,
    wave_strategy JSONB NOT NULL,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);
```

### UI Integration

The analysis from the Task Master is visualized in the UI through two key components:
1.  A **Task Complexity Matrix** that displays the full breakdown of each task.
2.  A **Dependency Graph** that visualizes the relationships between tasks.

</details>

## 4. AI Agent Coordination

The Task Master plays a key role in orchestrating the work of the Developer and Auditor AI agents.

*   **Task Master → Developer AI**:
    *   **Automated Task Assignment**: Assigns top-priority tasks to the Developer AI.
    *   **Context Delivery**: Provides detailed task specifications and dependencies.
    *   **Real-time Tracking**: Uses Git commit analysis to automatically update task status.

*   **Task Master → Auditor AI**:
    *   **Review Orchestration**: Identifies tasks that require architectural review by the Auditor AI.
    *   **Quality Criteria**: Delivers the specific validation rules for the task.
    *   **Escalation Management**: Triggers mitigation strategies or human escalation if a review fails.

<details>
<summary>View Git Commit Auto-Update System</summary>

The system uses regex patterns to detect task IDs and status keywords from commit messages, allowing for a 95% success rate in automatically updating task progress.

*   **Task Patterns**: `P(\d+)\.(\d+)`, `Task (\d+)\.(\d+)`
*   **Status Keywords**:
    *   `completed`: ['complete', 'implement', 'feat:', 'done']
    *   `in_progress`: ['wip:', 'working', 'start', 'progress']
    *   `blocked`: ['block', 'issue', 'error', 'fail']

*Example Commit*: `"feat: complete P1.1 project scaffolding"` → Task P1.1 status is updated to `completed`.

</details>
